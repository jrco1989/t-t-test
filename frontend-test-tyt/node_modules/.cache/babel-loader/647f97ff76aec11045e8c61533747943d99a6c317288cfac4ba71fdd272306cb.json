{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{useAuth}from'../context/AuthContext';import countCodService from'../services/countCodService';import getTotalPoints from'../services/getTotalPoints';// Importa el servicio para obtener los puntos totales\nimport'./Header.css';// Importa el archivo CSS para estilos\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const{username,logout,token}=useAuth();// Obtiene el nombre de usuario, la función de logout y el token\nconst[availableCodes,setAvailableCodes]=useState(0);const[totalPoints,setTotalPoints]=useState(0);// Estado para almacenar los puntos totales\nconst navigate=useNavigate();const location=useLocation();useEffect(()=>{fetchAvailableCodes();fetchTotalPoints();// Llama a la función para obtener los puntos totales cuando se monta el componente\n},[token]);// Vuelve a cargar la información cuando cambia el token\nconst fetchAvailableCodes=async()=>{try{const response=await countCodService(token);setAvailableCodes(response.count);}catch(error){console.error('Error fetching available codes:',error);}};const fetchTotalPoints=async()=>{try{const response=await getTotalPoints(token);// Llama al servicio para obtener los puntos totales\nsetTotalPoints(response.total_points);// Establece los puntos totales en el estado\n}catch(error){console.error('Error fetching total points:',error);}};const handleLogout=()=>{logout();navigate('/login');// Redirige a la página de inicio de sesión después de cerrar sesión\n};useEffect(()=>{const handleNavToggle=()=>{const navContainer=document.querySelector(\".navbar.navbar-expand-md.navbar-light.bg-light\");navContainer.classList.toggle(\"nav-expanded\");};const navbarToggler=document.querySelector(\".navbar-toggler.order-2.order-md-1\");if(navbarToggler){navbarToggler.addEventListener(\"click\",handleNavToggle);}return()=>{if(navbarToggler){navbarToggler.removeEventListener(\"click\",handleNavToggle);}};},[]);const isActive=path=>{return location.pathname===path?'active':'';};return/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsx(\"nav\",{className:\"navbar navbar-expand-md navbar-light bg-light\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"navbar-toggler order-2 order-md-1\",type:\"button\",\"data-bs-toggle\":\"collapse\",\"data-bs-target\":\".navbar-collapse\",\"aria-controls\":\"navbarNav\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",children:/*#__PURE__*/_jsx(\"span\",{className:\"navbar-toggler-icon\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"collapse navbar-collapse order-3 order-md-2\",id:\"navbar-left\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"navbar-nav me-auto\",children:/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"Bebas-Neue mx-2 text-title-name mt-5 pt-5 mb-5 mt-md-0 pt-md-0 mb-md-0\",children:[\"Bienvenido, \",username,\". Tienes \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-pts\",children:[totalPoints,\" pts\"]}),\" C\\xF3digos disponibles \",/*#__PURE__*/_jsx(\"span\",{className:\"text-pts\",children:availableCodes})]})})})}),/*#__PURE__*/_jsx(\"a\",{className:\"navbar-brand order-1 order-md-3\",href:\"#\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/logo.png\",alt:\"logo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"collapse navbar-collapse order-4 order-md-4\",id:\"navbar-right\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav ms-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item items-menu-mobile\",children:/*#__PURE__*/_jsx(Link,{to:\"/predicciones\",className:\"nav-link Bebas-Neue text-items-nav \".concat(isActive('/predicciones')),children:\"Predicciones\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item items-menu-mobile\",children:/*#__PURE__*/_jsx(Link,{to:\"/activar-codigos\",className:\"nav-link Bebas-Neue text-items-nav \".concat(isActive('/activar-codigos')),children:\"Activar C\\xF3digos\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item items-menu-mobile\",children:/*#__PURE__*/_jsx(Link,{to:\"/ranking\",className:\"nav-link Bebas-Neue text-items-nav \".concat(isActive('/ranking')),children:\"Ranking\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item items-menu-mobile\",children:/*#__PURE__*/_jsx(\"div\",{onClick:handleLogout,className:\"nav-link Bebas-Neue text-items-nav btn btn-link\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/ico-back.png\",className:\"icon-back\",alt:\"logout\"})})})]})})]})})});};export default Header;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","useAuth","countCodService","getTotalPoints","jsx","_jsx","jsxs","_jsxs","Header","username","logout","token","availableCodes","setAvailableCodes","totalPoints","setTotalPoints","navigate","location","fetchAvailableCodes","fetchTotalPoints","response","count","error","console","total_points","handleLogout","handleNavToggle","navContainer","document","querySelector","classList","toggle","navbarToggler","addEventListener","removeEventListener","isActive","path","pathname","className","children","type","id","href","src","alt","to","concat","onClick"],"sources":["/Users/diegojaramillo/Desktop/frontend-polla-copa-america/src/components/Header.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport countCodService from '../services/countCodService';\nimport getTotalPoints from '../services/getTotalPoints'; // Importa el servicio para obtener los puntos totales\nimport './Header.css'; // Importa el archivo CSS para estilos\n\nconst Header = () => {\n  const { username, logout, token } = useAuth(); // Obtiene el nombre de usuario, la función de logout y el token\n  const [availableCodes, setAvailableCodes] = useState(0);\n  const [totalPoints, setTotalPoints] = useState(0); // Estado para almacenar los puntos totales\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    fetchAvailableCodes();\n    fetchTotalPoints(); // Llama a la función para obtener los puntos totales cuando se monta el componente\n  }, [token]); // Vuelve a cargar la información cuando cambia el token\n\n  const fetchAvailableCodes = async () => {\n    try {\n      const response = await countCodService(token);\n      setAvailableCodes(response.count);\n    } catch (error) {\n      console.error('Error fetching available codes:', error);\n    }\n  };\n\n  const fetchTotalPoints = async () => {\n    try {\n      const response = await getTotalPoints(token); // Llama al servicio para obtener los puntos totales\n      setTotalPoints(response.total_points); // Establece los puntos totales en el estado\n    } catch (error) {\n      console.error('Error fetching total points:', error);\n    }\n  };\n\n  const handleLogout = () => {\n    logout();\n    navigate('/login'); // Redirige a la página de inicio de sesión después de cerrar sesión\n  };\n\n  useEffect(() => {\n    const handleNavToggle = () => {\n      const navContainer = document.querySelector(\".navbar.navbar-expand-md.navbar-light.bg-light\");\n      navContainer.classList.toggle(\"nav-expanded\");\n    };\n\n    const navbarToggler = document.querySelector(\".navbar-toggler.order-2.order-md-1\");\n    if (navbarToggler) {\n      navbarToggler.addEventListener(\"click\", handleNavToggle);\n    }\n\n    return () => {\n      if (navbarToggler) {\n        navbarToggler.removeEventListener(\"click\", handleNavToggle);\n      }\n    };\n  }, []);\n\n  const isActive = (path) => {\n    return location.pathname === path ? 'active' : '';\n  };\n\n  return (\n    <header className=\"header\">\n      <nav className=\"navbar navbar-expand-md navbar-light bg-light\">\n        <div className=\"container-fluid\">\n          <button className=\"navbar-toggler order-2 order-md-1\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\".navbar-collapse\"\n            aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n            <span className=\"navbar-toggler-icon\"></span>\n          </button>\n          <div className=\"collapse navbar-collapse order-3 order-md-2\" id=\"navbar-left\">\n            <ul className=\"navbar-nav me-auto\">\n              <li className=\"nav-item\">\n                <h5 className=\"Bebas-Neue mx-2 text-title-name mt-5 pt-5 mb-5 mt-md-0 pt-md-0 mb-md-0\">\n                  Bienvenido, {username}. Tienes <span className=\"text-pts\">{totalPoints} pts</span> Códigos disponibles <span className=\"text-pts\">{availableCodes}</span> \n                </h5>\n              </li>\n            </ul>\n          </div>\n          <a className=\"navbar-brand order-1 order-md-3\" href=\"#\">\n            <img src=\"/logo.png\" alt=\"logo\" />\n          </a>\n          <div className=\"collapse navbar-collapse order-4 order-md-4\" id=\"navbar-right\">\n            <ul className=\"navbar-nav ms-auto\">\n              <li className=\"nav-item items-menu-mobile\">\n                <Link to=\"/predicciones\" className={`nav-link Bebas-Neue text-items-nav ${isActive('/predicciones')}`}>Predicciones</Link>\n              </li>\n              <li className=\"nav-item items-menu-mobile\">\n                <Link to=\"/activar-codigos\" className={`nav-link Bebas-Neue text-items-nav ${isActive('/activar-codigos')}`}>Activar Códigos</Link>\n              </li>\n              <li className=\"nav-item items-menu-mobile\">\n                <Link to=\"/ranking\" className={`nav-link Bebas-Neue text-items-nav ${isActive('/ranking')}`}>Ranking</Link>\n              </li>\n              <li className=\"nav-item items-menu-mobile\">\n                <div onClick={handleLogout} className=\"nav-link Bebas-Neue text-items-nav btn btn-link\">\n                  <img src=\"/ico-back.png\" className=\"icon-back\" alt=\"logout\" />\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </nav>\n    </header>\n  );\n};\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}