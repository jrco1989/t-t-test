{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{Link}from'react-router-dom';import useEventService from'../services/eventService';import{useAuth}from'../context/AuthContext';import'./Events.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Events=()=>{const[events,setEvents]=useState([]);const[loading,setLoading]=useState(true);const[loaded,setLoaded]=useState(false);// Nueva variable de estado para controlar si los eventos ya se cargaron\nconst[error,setError]=useState(null);const{getEvents}=useEventService();const{token}=useAuth();const fetchEvents=useCallback(async()=>{try{const data=await getEvents();setEvents(data);setLoading(false);setLoaded(true);// Marcar que los eventos se han cargado correctamente\n}catch(err){setError(err.message||'Failed to fetch events');setLoading(false);}},[getEvents]);useEffect(()=>{if(token&&!loaded){// Solo carga los eventos si el token está disponible y aún no se han cargado\nfetchEvents();}},[token,loaded,fetchEvents]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"events-container\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Cargando...\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"events-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Eventos\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error-message\",children:error}),events.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No hay eventos disponibles.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"events-list\",children:events.map(event=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(Link,{to:\"/partidos/\".concat(event.id),children:event.name})},event.id))})]});};export default Events;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Link","useEventService","useAuth","jsx","_jsx","jsxs","_jsxs","Events","events","setEvents","loading","setLoading","loaded","setLoaded","error","setError","getEvents","token","fetchEvents","data","err","message","className","children","length","map","event","to","concat","id","name"],"sources":["/Users/diegojaramillo/Desktop/frontend-polla-copa-america/src/components/Events.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport useEventService from '../services/eventService';\nimport { useAuth } from '../context/AuthContext';\nimport './Events.css';\n\nconst Events = () => {\n  const [events, setEvents] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [loaded, setLoaded] = useState(false); // Nueva variable de estado para controlar si los eventos ya se cargaron\n  const [error, setError] = useState(null);\n  const { getEvents } = useEventService();\n  const { token } = useAuth();\n\n  const fetchEvents = useCallback(async () => {\n    try {\n      const data = await getEvents();\n      setEvents(data);\n      setLoading(false);\n      setLoaded(true); // Marcar que los eventos se han cargado correctamente\n    } catch (err) {\n      setError(err.message || 'Failed to fetch events');\n      setLoading(false);\n    }\n  }, [getEvents]);\n\n  useEffect(() => {\n    if (token && !loaded) { // Solo carga los eventos si el token está disponible y aún no se han cargado\n      fetchEvents();\n    }\n  }, [token, loaded, fetchEvents]);\n\n  if (loading) {\n    return <div className=\"events-container\"><p>Cargando...</p></div>;\n  }\n\n  return (\n    <div className=\"events-container\">\n      <h2>Eventos</h2>\n      {error && <p className=\"error-message\">{error}</p>}\n      {events.length === 0 ? (\n        <p>No hay eventos disponibles.</p>\n      ) : (\n        <ul className=\"events-list\">\n          {events.map(event => (\n            <li key={event.id}>\n              <Link to={`/partidos/${event.id}`}>{event.name}</Link>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default Events;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,eAAe,KAAM,0BAA0B,CACtD,OAASC,OAAO,KAAQ,wBAAwB,CAChD,MAAO,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEtB,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACe,MAAM,CAAEC,SAAS,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CAAE;AAC7C,KAAM,CAACiB,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAEmB,SAAU,CAAC,CAAGf,eAAe,CAAC,CAAC,CACvC,KAAM,CAAEgB,KAAM,CAAC,CAAGf,OAAO,CAAC,CAAC,CAE3B,KAAM,CAAAgB,WAAW,CAAGnB,WAAW,CAAC,SAAY,CAC1C,GAAI,CACF,KAAM,CAAAoB,IAAI,CAAG,KAAM,CAAAH,SAAS,CAAC,CAAC,CAC9BP,SAAS,CAACU,IAAI,CAAC,CACfR,UAAU,CAAC,KAAK,CAAC,CACjBE,SAAS,CAAC,IAAI,CAAC,CAAE;AACnB,CAAE,MAAOO,GAAG,CAAE,CACZL,QAAQ,CAACK,GAAG,CAACC,OAAO,EAAI,wBAAwB,CAAC,CACjDV,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAAE,CAACK,SAAS,CAAC,CAAC,CAEflB,SAAS,CAAC,IAAM,CACd,GAAImB,KAAK,EAAI,CAACL,MAAM,CAAE,CAAE;AACtBM,WAAW,CAAC,CAAC,CACf,CACF,CAAC,CAAE,CAACD,KAAK,CAAEL,MAAM,CAAEM,WAAW,CAAC,CAAC,CAEhC,GAAIR,OAAO,CAAE,CACX,mBAAON,IAAA,QAAKkB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAACnB,IAAA,MAAAmB,QAAA,CAAG,aAAW,CAAG,CAAC,CAAK,CAAC,CACnE,CAEA,mBACEjB,KAAA,QAAKgB,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BnB,IAAA,OAAAmB,QAAA,CAAI,SAAO,CAAI,CAAC,CACfT,KAAK,eAAIV,IAAA,MAAGkB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAET,KAAK,CAAI,CAAC,CACjDN,MAAM,CAACgB,MAAM,GAAK,CAAC,cAClBpB,IAAA,MAAAmB,QAAA,CAAG,6BAA2B,CAAG,CAAC,cAElCnB,IAAA,OAAIkB,SAAS,CAAC,aAAa,CAAAC,QAAA,CACxBf,MAAM,CAACiB,GAAG,CAACC,KAAK,eACftB,IAAA,OAAAmB,QAAA,cACEnB,IAAA,CAACJ,IAAI,EAAC2B,EAAE,cAAAC,MAAA,CAAeF,KAAK,CAACG,EAAE,CAAG,CAAAN,QAAA,CAAEG,KAAK,CAACI,IAAI,CAAO,CAAC,EAD/CJ,KAAK,CAACG,EAEX,CACL,CAAC,CACA,CACL,EACE,CAAC,CAEV,CAAC,CAED,cAAe,CAAAtB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}